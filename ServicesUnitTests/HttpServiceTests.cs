using Microsoft.VisualStudio.TestTools.UnitTesting;
using Services;

[TestClass]
public class HttpServiceTests
{
    private string dummyUrlThatReturnsAnArrayAsJson = "http://dummy.restapiexample.com/api/v1/employees";

    [TestMethod]
    public void ShouldGetValidResponseOnValidUrl()
    {
        var sut = new HttpService();

        var result = sut.GetAsync(dummyUrlThatReturnsAnArrayAsJson).Result;

        Assert.IsTrue(result.isSuccess);
        Assert.IsTrue(false == string.IsNullOrEmpty(result.value));
    }

    [TestMethod]
    public void ShouldReturnInvalidResponseOnEmptyUrl()
    {
        var sut = new HttpService();

        var result = sut.GetAsync(string.Empty).Result;

        Assert.IsTrue(false == result.isSuccess);
        Assert.IsTrue(result.value == string.Empty);
    }

    [TestMethod]
    public void ShouldReturnInvalidResponseOnNullUrl()
    {
        var sut = new HttpService();

        var result = sut.GetAsync(null).Result;

        Assert.IsTrue(false == result.isSuccess);
        Assert.IsTrue(result.value == string.Empty);
    }

    [TestMethod]
    public void ShouldReturnInvalidResponseOnInvalidUrl()
    {
        var sut = new HttpService();

        var result = sut.GetAsync(dummyUrlThatReturnsAnArrayAsJson + "foo").Result;

        Assert.IsTrue(false == result.isSuccess);
        Assert.IsTrue(result.value == string.Empty);
    }

    [TestMethod]
    public void ShouldReturnImageAsBase64OnValidUrl()
    {
        var urlOfRandomImage =
            "https://www.statisticshowto.datasciencecentral.com/wp-content/uploads/2013/12/randomSampling.jpg";

        var manualyEncodedImageAsBase64 = @"image/jpg;base64, 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";

        var sut = new HttpService();

        var result = sut.GetImageAsBase64url(urlOfRandomImage).Result;

        Assert.IsTrue(manualyEncodedImageAsBase64 == result);
    }

    [TestMethod]
    public void ShouldReturnEmptyResultForEncodingImageOnInvalidUrl()
    {
        var sut = new HttpService();

        var result = sut.GetImageAsBase64url("nastyNotWorthyUrl").Result;

        Assert.IsTrue(result == string.Empty);

        result = sut.GetImageAsBase64url("").Result;

        Assert.IsTrue(result == string.Empty);
    }

    [TestMethod]
    public void ShouldReturnEmptyResultForEncodingImageOnEmptyOrNullUrl()
    {
        var sut = new HttpService();

        var result = sut.GetImageAsBase64url(null).Result;

        Assert.IsTrue(result == string.Empty);

        result = sut.GetImageAsBase64url("").Result;

        Assert.IsTrue(result == string.Empty);
    }
}

